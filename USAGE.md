# 使用指南

## 目录

- [快速开始](#快速开始)
- [功能详解](#功能详解)
- [高级用法](#高级用法)
- [常见问题](#常见问题)

## 快速开始

### 方式一：使用启动脚本

```bash
./start.sh
```

### 方式二：手动启动

```bash
npm install
npm start
```

### 方式三：开发模式（带自动重启）

```bash
npm run dev
```

启动后，在浏览器中访问：`http://localhost:3000`

## 功能详解

### 1. 提交历史（Commits）

**功能说明：**
查看Git仓库的提交历史，包括提交哈希、作者、日期和提交信息。

**使用步骤：**
1. 点击左侧导航栏的"📝 提交历史"
2. 在输入框中设置要显示的提交数量（1-100之间）
3. 点击"加载提交"按钮

**显示信息：**
- 提交哈希（短格式，8位）
- 作者信息（姓名和邮箱）
- 提交时间（智能显示相对时间）
- 提交信息

**小贴士：**
- 鼠标悬停在提交上会有高亮效果
- 时间显示会自动转换为相对时间（如"5分钟前"、"2小时前"）
- 超过7天的提交会显示具体日期

### 2. 分支管理（Branches）

**功能说明：**
管理Git仓库的所有分支，支持创建、切换和删除操作。

**创建新分支：**
1. 在"新分支名称"输入框中输入分支名
2. 点击"创建分支"按钮
3. 新分支会基于当前分支创建

**切换分支：**
1. 找到目标分支
2. 点击"切换"按钮
3. 确认切换成功后，顶部会显示新的当前分支

**删除分支：**
1. 找到要删除的分支
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"
4. 系统会先尝试安全删除（-d），失败则强制删除（-D）

**注意事项：**
- 当前分支会以绿色高亮显示，带有 ✓ 标记
- 无法删除当前所在的分支
- 删除前会弹出确认对话框

### 3. 工作区状态（Status）

**功能说明：**
实时查看工作区的文件状态，了解哪些文件被修改、暂存或删除。

**使用步骤：**
1. 点击左侧导航栏的"📊 工作区状态"
2. 系统会自动加载状态，或点击"刷新状态"按钮手动刷新

**状态分类：**

- **📦 暂存区文件（STAGED）**
  - 已通过 `git add` 添加到暂存区的文件
  - 绿色标签显示

- **✏️ 已修改文件（MODIFIED）**
  - 已修改但未添加到暂存区的文件
  - 黄色标签显示

- **❓ 未跟踪文件（UNTRACKED）**
  - 新创建的、尚未被Git跟踪的文件
  - 灰色标签显示

- **🗑️ 已删除文件（DELETED）**
  - 已删除但尚未提交的文件
  - 红色标签显示

**状态解读：**
- 如果所有分类都为空，会显示"✅ 工作区干净"
- 文件路径使用等宽字体显示，便于阅读

### 4. 差异对比（Diff）

**功能说明：**
查看文件内容的差异，支持多种对比模式。

**对比类型：**

1. **工作区 vs 暂存区**
   - 显示未暂存的修改
   - 等同于 `git diff`

2. **暂存区 vs HEAD**
   - 显示已暂存但未提交的修改
   - 等同于 `git diff --staged`

3. **工作区 vs HEAD**
   - 显示所有未提交的修改（包括已暂存和未暂存）
   - 等同于 `git diff HEAD`

**使用步骤：**
1. 选择对比类型
2. （可选）输入具体文件路径
3. 点击"查看差异"按钮

**差异显示：**
- 绿色背景：新增的行（以 + 开头）
- 红色背景：删除的行（以 - 开头）
- 灰色背景：文件头信息和位置信息（以 @@ 或 diff 开头）
- 普通背景：上下文行

**高级用法：**
```
# 查看特定文件的差异
文件路径：src/app.js

# 查看整个目录的差异
文件路径：src/

# 查看所有差异
文件路径：留空
```

## 高级用法

### 1. 监控特定仓库

如果你想监控其他Git仓库而不是当前目录：

```bash
GIT_REPO_PATH=/path/to/repository npm start
```

### 2. 使用不同端口

```bash
PORT=8080 npm start
```

### 3. 组合使用

```bash
PORT=8080 GIT_REPO_PATH=/path/to/repo npm start
```

### 4. 后台运行

```bash
npm start > server.log 2>&1 &
```

查看日志：
```bash
tail -f server.log
```

停止服务：
```bash
pkill -f "node server.js"
```

## 快捷键和技巧

### 界面操作

- **刷新按钮**：快速刷新当前页面的数据
- **ESC键**：关闭确认对话框（浏览器原生功能）

### 最佳实践

1. **定期刷新**
   - 使用顶部的"刷新"按钮保持数据最新
   - 特别是在执行Git命令后

2. **分支命名**
   - 使用有意义的分支名
   - 遵循项目的命名规范（如 feature/、bugfix/、hotfix/）

3. **提交历史查看**
   - 首次加载建议使用20条记录
   - 如需查看更多历史，可以增加到50或100

4. **差异对比**
   - 提交前先查看差异，确保修改正确
   - 使用"暂存区 vs HEAD"查看即将提交的内容

## 常见问题

### Q: 启动后无法访问界面？

**A:** 检查以下几点：
1. 确认服务器已成功启动（查看控制台输出）
2. 确认端口3000未被占用
3. 尝试使用 `http://127.0.0.1:3000` 代替 `localhost`
4. 检查防火墙设置

### Q: 显示"加载失败，请确保后端服务正在运行"？

**A:** 这表示前端无法连接到后端API：
1. 确认 `server.js` 正在运行
2. 检查浏览器控制台的网络错误
3. 确认API地址配置正确（app.js中的API_BASE）

### Q: Git命令执行失败？

**A:** 可能的原因：
1. 当前目录不是Git仓库
2. Git未正确安装
3. 权限不足
4. 设置 `GIT_REPO_PATH` 指向有效的Git仓库

### Q: 分支删除失败？

**A:** 可能的原因：
1. 尝试删除当前分支（先切换到其他分支）
2. 分支有未合并的修改（系统会尝试强制删除）
3. 分支不存在

### Q: 差异对比显示为空？

**A:** 这是正常的，表示：
1. 选择的对比范围内没有差异
2. 工作区是干净的
3. 指定的文件没有修改

### Q: 如何查看完整的提交哈希？

**A:** 目前界面只显示8位短哈希，如需完整哈希：
1. 在终端中使用 `git log`
2. 或者点击提交项（功能待开发）

### Q: 界面支持暗色主题吗？

**A:** 当前版本使用浅色主题，暗色主题功能在开发计划中。

### Q: 可以在移动设备上使用吗？

**A:** 可以！界面完全响应式，支持移动设备访问。只需：
1. 确保设备与服务器在同一网络
2. 使用服务器的IP地址访问（如 `http://192.168.1.100:3000`）

### Q: 如何停止服务器？

**A:** 在运行服务器的终端窗口中按 `Ctrl + C`

## 性能优化建议

1. **限制提交数量**
   - 大型仓库建议每次只加载20-50条提交
   - 避免一次加载过多数据

2. **定期清理浏览器缓存**
   - 特别是在更新代码后

3. **使用开发模式**
   - 开发时使用 `npm run dev`
   - 自动重启可以快速测试修改

## 安全注意事项

1. **本地使用**
   - 此工具设计用于本地开发环境
   - 不建议在生产环境或公网暴露

2. **权限控制**
   - 工具继承了运行用户的Git权限
   - 确保只在可信环境中使用

3. **敏感信息**
   - 注意不要在公共环境中显示包含敏感信息的仓库
   - 提交信息和差异可能包含敏感数据

## 反馈和支持

如遇到问题或有功能建议，请：
1. 检查本文档的常见问题部分
2. 查看服务器日志输出
3. 查看浏览器控制台的错误信息

## 更新日志

### v1.0.0 (当前版本)
- ✅ 基础UI界面
- ✅ 提交历史查看
- ✅ 分支管理（创建、切换、删除）
- ✅ 工作区状态显示
- ✅ 差异对比功能
- ✅ 响应式设计
- ✅ 实时通知提示

### 计划功能
- ⏳ 暗色主题
- ⏳ 提交操作（add、commit、push、pull）
- ⏳ 合并冲突解决
- ⏳ 标签管理
- ⏳ 远程仓库管理
- ⏳ 文件树视图
- ⏳ 图形化提交历史
- ⏳ 搜索和过滤功能
